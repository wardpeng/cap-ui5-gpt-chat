{"version":3,"file":"NewEntityDialog.js","names":["NewEntityDialog","constructor","context","fragment","view","open","model","getModel","Promise","resolve","reject","dialog","Fragment","load","id","name","controller","addDependent","setBindingContext","created","then","close","onCreate","submitBatch","getUpdateGroupId","onCancel","error"],"sources":["NewEntityDialog.ts"],"sourcesContent":["import Dialog from \"sap/m/Dialog\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport View from \"sap/ui/core/mvc/View\";\nimport Context from \"sap/ui/model/odata/v4/Context\";\nimport ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\nexport default class NewEntityDialog {\n  private resolve: (args: any) => void;\n  private reject: (error: any) => void;\n  private dialog: Dialog;\n  private model: ODataModel;\n\n  constructor(private context: Context, private fragment: string, private view: View) {}\n\n  public async open(): Promise<Context> {\n    this.model = <ODataModel>this.context.getModel();\n\n    return new Promise(async (resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n      this.dialog = <Dialog>await Fragment.load({\n        id: \"newEntityDialog\",\n        name: `com.p36.capui5gptchat.fragment.${this.fragment}`,\n        controller: this,\n      });\n      this.view.addDependent(this.dialog);\n      this.dialog.setBindingContext(this.context);\n      this.context.created().then(() => {\n        this.dialog.close();\n        this.resolve(this.context);\n      }, reject);\n\n      this.dialog.open();\n    });\n  }\n\n  public async onCreate(): Promise<void> {\n    await this.model.submitBatch(this.model.getUpdateGroupId());\n  }\n\n  public onCancel(): void {\n    this.dialog.close();\n    this.reject({ error: \"User cancelled\" });\n  }\n}\n"],"mappings":";EAMe,MAAMA,eAAe,CAAC;IAMnCC,WAAW,CAASC,OAAgB,EAAUC,QAAgB,EAAUC,IAAU,EAAE;MAAA,KAAhEF,OAAgB,GAAhBA,OAAgB;MAAA,KAAUC,QAAgB,GAAhBA,QAAgB;MAAA,KAAUC,IAAU,GAAVA,IAAU;IAAG;IAErF,MAAaC,IAAI,GAAqB;MACpC,IAAI,CAACC,KAAK,GAAe,IAAI,CAACJ,OAAO,CAACK,QAAQ,EAAE;MAEhD,OAAO,IAAIC,OAAO,CAAC,OAAOC,OAAO,EAAEC,MAAM,KAAK;QAC5C,IAAI,CAACD,OAAO,GAAGA,OAAO;QACtB,IAAI,CAACC,MAAM,GAAGA,MAAM;QACpB,IAAI,CAACC,MAAM,GAAW,MAAMC,QAAQ,CAACC,IAAI,CAAC;UACxCC,EAAE,EAAE,iBAAiB;UACrBC,IAAI,EAAG,kCAAiC,IAAI,CAACZ,QAAS,EAAC;UACvDa,UAAU,EAAE;QACd,CAAC,CAAC;QACF,IAAI,CAACZ,IAAI,CAACa,YAAY,CAAC,IAAI,CAACN,MAAM,CAAC;QACnC,IAAI,CAACA,MAAM,CAACO,iBAAiB,CAAC,IAAI,CAAChB,OAAO,CAAC;QAC3C,IAAI,CAACA,OAAO,CAACiB,OAAO,EAAE,CAACC,IAAI,CAAC,MAAM;UAChC,IAAI,CAACT,MAAM,CAACU,KAAK,EAAE;UACnB,IAAI,CAACZ,OAAO,CAAC,IAAI,CAACP,OAAO,CAAC;QAC5B,CAAC,EAAEQ,MAAM,CAAC;QAEV,IAAI,CAACC,MAAM,CAACN,IAAI,EAAE;MACpB,CAAC,CAAC;IACJ;IAEA,MAAaiB,QAAQ,GAAkB;MACrC,MAAM,IAAI,CAAChB,KAAK,CAACiB,WAAW,CAAC,IAAI,CAACjB,KAAK,CAACkB,gBAAgB,EAAE,CAAC;IAC7D;IAEOC,QAAQ,GAAS;MACtB,IAAI,CAACd,MAAM,CAACU,KAAK,EAAE;MACnB,IAAI,CAACX,MAAM,CAAC;QAAEgB,KAAK,EAAE;MAAiB,CAAC,CAAC;IAC1C;EACF;EAAC;AAAA"}